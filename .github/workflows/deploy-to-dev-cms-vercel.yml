name: deploy-to-dev-cms-vercel
on:
  workflow_dispatch:
    inputs:
      Environment:
        type: choice
        required: true
        description: Environment To Run Against
        options: 
        - develop
      DeployToCMS:
        description: Deploy To CMS
        type: boolean
        default: true
        required: true
      DeployToVercel:
        description: Deploy To Vercel
        type: boolean
        default: true
        required: true
      #Message:
      #  required: true
      #Environment:
      #  description: 'Environment To Run Against'
      #  type: environment
      #  required: true
env:
  UserName: ${{ github.event.inputs.DeployToCMS }}
  Message: ${{ github.event.inputs.DeployToCMS }}
  DeployToCMS: ${{ github.event.inputs.DeployToCMS }}
  DeployToVercel: ${{ github.event.inputs.DeployToVercel }}
  DeployEnvironment: ${{ github.event.inputs.Environment }}
jobs:
  Deploy:
    name: "Deploy to ${{ github.event.inputs.Environment }} environment"
    #if: ${{ github.event.inputs.Environment == 'master' }}
    runs-on: ubuntu-latest
    environment:
      name: ${{ github.event.inputs.Environment }}

    steps:
    - name: Print User Inputs
      run: echo "$UserName - $Message - $DeployToCMS - $DeployToVercel - $DeployEnvironment - ${{ vars.VAR1 }}"

    - name: Output Inputs
      run: echo "${{ toJSON(env) }}"
        
    - name: DeployToCMS
      if: ${{ github.event.inputs.DeployToCMS  == 'true'}}
      run: echo "${{ github.event.inputs.Message }}"
      
    - name: DeployToVercel
      if: ${{ github.event.inputs.DeployToVercel  == 'true'}}
      run: echo "${{ github.event.inputs.Message }}"
