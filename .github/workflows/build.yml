name: Create SAP Build
on:
  push:
    branches:
      - master
      - develop
      - hotfix
      - release
jobs:
  Build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    - name: Print GitHub context
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: |
        echo "The event name is ${{ github.event_name }}"
        #echo "$GITHUB_CONTEXT"
    - name: "Set Environment Specific "
      run: |
          if $GITHUB_REF_NAME == "develop"; then
            echo "AUTH0_AUDIENCE=https://resideo.auth0.com/api/v2/" >> $GITHUB_ENV
            echo "AUTH0_CLIENT_ID=TDvgR8AZXLx3UvH734fHagm8nNXdm8EY" >> $GITHUB_ENV
            echo "AUTH0_DOMAIN=login.dev.resideo.com" >> $GITHUB_ENV
            echo "APP_ENVIRONMENT=develop" >> $GITHUB_ENV
            echo "CALLBACK_URL=https://eu2.svcecomm.resideo.com" >> $GITHUB_ENV
          elseif $GITHUB_REF_NAME == "develop2"; then
            echo "AUTH0_AUDIENCE=https://resideo.auth0.com/api/v2/" >> $GITHUB_ENV
            echo "AUTH0_CLIENT_ID=TDvgR8AZXLx3UvH734fHagm8nNXdm8EY" >> $GITHUB_ENV
            echo "AUTH0_DOMAIN=login.dev.resideo.com" >> $GITHUB_ENV
            echo "APP_ENVIRONMENT=develop" >> $GITHUB_ENV
            echo "CALLBACK_URL=https://eu2.svcecomm.resideo.com" >> $GITHUB_ENV
          else
            echo "AUTH0_AUDIENCE=https://resideo.auth0.com/api/v2/" >> $GITHUB_ENV
            echo "AUTH0_CLIENT_ID=TDvgR8AZXLx3UvH734fHagm8nNXdm8EY" >> $GITHUB_ENV
            echo "AUTH0_DOMAIN=login.dev.resideo.com" >> $GITHUB_ENV
            echo "APP_ENVIRONMENT=master" >> $GITHUB_ENV
            echo "CALLBACK_URL=https://eu2.prd.svcecomm.resideo.com" >> $GITHUB_ENV
          fi
    - run:  env
